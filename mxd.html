<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MXD Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0b0b;
      --text: #ffffff;
      --accent: #3a7bfd;
      --card: #1a1a1a;
      --rounded: 16px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 2rem;
    }

    .interface {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 2rem;
      max-width: 960px;
      width: 100%;
    }

    .chat-section {
      background: var(--card);
      border-radius: 24px;
      padding: 2rem;
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-height: 80vh;
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    .msg-box {
      background: rgba(255, 255, 255, 0.07);
      padding: 1rem 1.2rem;
      border-radius: var(--rounded);
      font-size: 1rem;
      line-height: 1.4;
    }

    .input-row {
      display: none;
      flex-direction: column;
      gap: 0.75rem;
    }

    input {
      padding: 1rem;
      border-radius: var(--rounded);
      border: none;
      background: #111;
      color: #fff;
      font-size: 1rem;
    }

    .btn {
      background: #000;
      color: #fff;
      font-weight: 700;
      border: 1px solid #fff;
      border-radius: var(--rounded);
      padding: 1rem;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s ease;
      text-align: center;
    }

    .btn:hover {
      background: #fff;
      color: #000;
    }

    .avatar {
      max-height: 420px;
      width: auto;
      animation: bounceIn 1s ease, glowPulse 2.5s ease-in-out infinite;
      transition: transform 0.3s ease;
    }

    .avatar:hover {
      transform: translateY(-6px) rotate(-1deg);
    }

    @keyframes bounceIn {
      0% { opacity: 0; transform: scale(0.8) translateY(20px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes glowPulse {
      0%, 100% { filter: drop-shadow(0 0 0px var(--accent)); }
      50% { filter: drop-shadow(0 0 12px var(--accent)); }
    }
  </style>
</head>
<body>
  <div class="interface">
    <div class="chat-section" id="chat">
      <div class="msg-box">Yo — <strong>Mixed</strong>, your assistant here at MXD. Let’s see if this path makes sense for you.</div>
      <div class="msg-box">We’re about to ask you a few quick questions to see if this opportunity is a strong fit. If you’re serious about leveling up, fill everything out truthfully and fully.</div>
      <div class="input-row" id="inputRow">
        <input type="text" id="input" placeholder="Type here...">
      </div>
      <button class="btn" id="startBtn" onclick="startChat()">GET QUALIFIED</button>
    </div>
    <img src="https://jacoblemire.github.io/plugbot-ai/plugbot.png" alt="Mixed Bot" class="avatar">
  </div>

  <script>
    const input = document.getElementById("input");
    const chatSection = document.getElementById("chat");
    const startBtn = document.getElementById("startBtn");
    const inputRow = document.getElementById("inputRow");

    let step = -1;
    const data = {};
    let userName = "";
    let hasName = false;

    const prompts = [
      "First up — what’s your name?",
      "How old are you right now?",
      "Where are you based currently?",
      "What’s your current monthly income?",
      "Do you have any savings or credit you could use if this feels aligned?",
      "Real talk — why are you even looking to make remote income?",
      "Ever tried remote work or online sales before?",
      "What’s the dream monthly income that’d feel like freedom to you?",
      "Drop your email — I’ll send over the next steps:",
      "And what’s the best phone number in case we need to follow up?"
    ];

    const fields = ["name", "age", "location", "income", "savings", "reason", "experience", "goal", "email", "phone"];

    function appendMsg(text) {
      const msg = document.createElement("div");
      msg.className = "msg-box";
      msg.innerText = text;
      chatSection.insertBefore(msg, inputRow);
      chatSection.scrollTop = chatSection.scrollHeight;
    }

    function getMirrorResponse(field, val) {
      switch (field) {
        case "name": return `Nice to meet you, ${val} 👋`;
        case "age": return `${val}? That’s a solid age to start building this up.`;
        case "location": return `${val}? Dope — got a lot of hungry builders there.`;
        case "income": return `$${val}/mo? That’s a solid base — let’s level it up.`;
        case "savings":
          return val.toLowerCase().includes("credit")
            ? `Using credit smartly can open doors — just gotta play it right.`
            : `Cool — having some backup gives us room to move.`;
        case "reason": return `That’s real. Everyone’s got their own why — respect.`;
        case "experience": return val.toLowerCase().includes("no")
          ? `No prior experience? That’s perfect — clean foundation.`
          : `You’ve dabbled before? That helps — we’ll build on that.`;
        case "goal": return `$${val}/mo? That’s a goal I can respect — let’s map it.`;
        case "email": return `Cool — we’ll hit your inbox with the next steps.`;
        case "phone": return `Locked in. If anything urgent comes up, we’ll text you.`;
        default: return "";
      }
    }

    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function startChat() {
      startBtn.style.display = "none";
      inputRow.style.display = "flex";
      step = 0;
      await delay(500);
      appendMsg(prompts[step]);
    }

    async function sendInput() {
      const val = input.value.trim();
      if (!val || step === -1) return;

      appendMsg(val);
      const field = fields[step];
      data[field] = val;
      input.value = "";

      if (field === "name") {
        userName = val;
        hasName = true;
      }

      const mirror = getMirrorResponse(field, val);
      if (mirror) {
        await delay(700);
        appendMsg(mirror);
      }

      step++;
      if (step < prompts.length) {
        await delay(1000);
        appendMsg(prompts[step]);
      } else {
        const age = parseInt(data.age);
        const income = parseInt(data.income);
        const savingsInput = data.savings.toLowerCase();
        const savingsAmount = parseInt(savingsInput.replace(/[^0-9]/g, ''));
        const mentionsCredit = savingsInput.includes('credit');

        const lowAge = isNaN(age) || age < 17;
        const lowIncome = isNaN(income) || income < 500;
        const lowSavings = isNaN(savingsAmount) || savingsAmount <= 300;

        const disqualified = lowAge || (lowIncome && lowSavings && !mentionsCredit);

        await delay(800);
        if (disqualified) {
          appendMsg("Appreciate your honesty. Based on what you shared, this might not be the right time — but keep growing and check back when you're more ready.");
        } else {
          appendMsg(`✅ You're aligned${hasName ? ", " + userName : ""}.`);
          await delay(800);
          appendMsg("This is a rare opportunity to speak 1-on-1 with an MXD executive.");
          await delay(1000);
          appendMsg("⚠️ Please come prepared — this isn’t a sales pitch. We expect you to show up on time, look sharp, and take notes.");
          await delay(1000);
          appendMsg("👇 If that’s you, lock in your call now:");

          const link = document.createElement("a");
          link.href = "https://calendly.com/jadafig1";
          link.innerText = "Book Your Call";
          link.target = "_blank";
          link.className = "btn";
          chatSection.appendChild(link);
          chatSection.scrollTop = chatSection.scrollHeight;

          fetch("https://hook.us2.make.com/y1tdeyvxp8gqtaifqsthdpiwayas40fp", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              source: "PlugBot: MXD Sales Page",
              timestamp: new Date().toISOString(),
              ...data
            })
          });
        }
      }
    }

    input.addEventListener("keydown", function(e) {
      if (e.key === "Enter") sendInput();
    });
  </script>
</body>
</html>
