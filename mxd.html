<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlugBot | MXD Enterprises</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
  <style>
    :root {
      --bg: #0b0b0b;
      --text: #ffffff;
      --accent: #00ffae;
      --bot: #a0e7e5;
      --user: #fcd34d;
      --rounded: 16px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: var(--bg);
      font-family: 'Inter', sans-serif;
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      padding: 20px 0;
    }
    #avatar {
      width: 130px;
      margin-bottom: 10px;
      border-radius: 12px;
      box-shadow: 0 0 18px rgba(255, 255, 255, 0.4);
      animation: float 4s ease-in-out infinite, glowPulse 2s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes glowPulse {
      0%, 100% { filter: drop-shadow(0 0 0px #fff); }
      50% { filter: drop-shadow(0 0 15px #fff); }
    }
    #chatbox {
      width: 90vw;
      max-width: 520px;
      height: 65vh;
      background-color: #1f1f1f;
      border-radius: var(--rounded);
      padding: 16px;
      overflow-y: auto;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    }
    .message {
      margin: 10px 0;
      padding: 12px 16px;
      border-radius: var(--rounded);
      max-width: 85%;
      line-height: 1.5;
    }
    .bot { background-color: #222; color: var(--bot); }
    .user { background-color: #333; color: var(--user); align-self: flex-end; text-align: right; }
    input[type="text"] {
      width: 90vw;
      max-width: 520px;
      padding: 14px;
      border-radius: var(--rounded);
      background-color: #111;
      color: white;
      border: none;
      font-size: 16px;
      outline: none;
      margin-top: 10px;
    }
    .btn {
      background-color: var(--accent);
      color: #0b0b0b;
      font-weight: bold;
      border: none;
      padding: 12px 24px;
      border-radius: var(--rounded);
      cursor: pointer;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <img id="avatar" src="https://raw.githubusercontent.com/jacoblemire/plugbot-ai/main/PlugBot.png" alt="PlugBot Avatar">
  <div id="chatbox"></div>
  <button class="btn" id="startBtn" onclick="startChat()">GET QUALIFIED</button>
  <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off" disabled>

  <script>
    const chatbox = document.getElementById('chatbox');
    const input = document.getElementById('userInput');
    const startBtn = document.getElementById('startBtn');

    const prompts = [
      "Whatâ€™s your name?",
      "How old are you?",
      "Where are you based right now?",
      "Whatâ€™s your current monthly income?",
      "Do you have at least $500 saved or available in credit?",
      "Whatâ€™s your main reason for wanting remote income?",
      "Have you ever done remote work or online sales before?",
      "Whatâ€™s your dream monthly income?",
      "Drop your email:",
      "Best phone number in case we need to follow up:"
    ];

    const fields = ["name", "age", "location", "income", "savings", "reason", "experience", "goal", "email", "phone"];
    const responses = {
      name: val => `Nice to meet you, ${val}.`,
      age: val => parseInt(val) < 20 ? "Young and driven â€” love it." : "Solid. You're in the right season to build.",
      location: val => `Nice. ${val} has got potential.`,
      income: () => `Appreciate the honesty â€” letâ€™s level it up.`,
      savings: val => /yes|some|of course|i do|yup/i.test(val) ? "Respect â€” that shows commitment." : "No worries â€” just means weâ€™ll be strategic.",
      reason: () => `Thatâ€™s valid. We hear that a lot from hungry folks.`,
      experience: val => /no|never/.test(val.toLowerCase()) ? "No problem â€” we teach this from scratch." : "Fire â€” that background can only help.",
      goal: val => `ðŸ”¥ Love it. $${val}/month is definitely possible.",
      email: () => "Email locked in.",
      phone: () => "Phone saved. You're almost there."
    };

    let step = -1, data = {}, qualified = false;

    function addMessage(text, sender = 'bot') {
      const msg = document.createElement('div');
      msg.className = `message ${sender}`;
      msg.innerText = text;
      chatbox.appendChild(msg);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function startChat() {
      startBtn.style.display = 'none';
      input.disabled = false;
      input.focus();
      step = 0;
      addMessage("Yo â€” letâ€™s get into it. " + prompts[step]);
    }

    input.addEventListener('keypress', async (e) => {
      if (e.key === 'Enter') {
        const val = input.value.trim();
        if (!val) return;

        addMessage(val, 'user');
        const field = fields[step];
        data[field] = val;
        input.value = '';

        if (field === "name") data.username = val;

        setTimeout(() => {
          addMessage(responses[field] ? responses[field](val) : "Got it.");
        }, 600);

        step++;
        if (step < prompts.length) {
          setTimeout(() => {
            addMessage(prompts[step]);
          }, 1300);
        } else {
          const age = parseInt(data.age);
          const savings = data.savings.toLowerCase();
          const hasFunds = /yes|some|bit|for sure|of course|yeah|i do|yup/i.test(savings);

          if (age >= 17 && hasFunds) {
            addMessage("âœ… You're aligned, " + data.username + ".");
            setTimeout(() => addMessage("Lock in your call below and letâ€™s build."), 1000);
            const link = document.createElement("a");
            link.href = "https://calendly.com/jadafig1";
            link.target = "_blank";
            link.innerText = "ðŸŽ¯ Book Your Call";
            link.className = "btn";
            chatbox.appendChild(link);
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
          } else {
            addMessage("Respect for being real â€” looks like this might not be the right time.");
            setTimeout(() => addMessage("Hereâ€™s a free course to help you prep:"), 800);
            const freeLink = document.createElement("a");
            freeLink.href = "https://mxdenterprises.com/free-course.html";
            freeLink.target = "_blank";
            freeLink.innerText = "ðŸ“˜ Watch Free Course";
            freeLink.className = "btn";
            chatbox.appendChild(freeLink);
          }

          fetch("https://hook.us2.make.com/y1tdeyvxp8gqtaifqsthdpiwayas40fp", {
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              source: "PlugBot | MXD", timestamp: new Date().toISOString(), ...data
            })
          });

          input.disabled = true;
        }
      }
    });
  </script>
</body>
</html>
