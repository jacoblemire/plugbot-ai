<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PlugBot – MXD Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f9f9f9;
      --primary: #111;
      --secondary: #666;
      --accent: #000;
      --bot-bg: #e6e6e6;
      --user-bg: #d1f5ff;
    }

    * {
      margin: 0; padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--bg);
      font-family: 'Inter', sans-serif;
      color: var(--primary);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem;
      min-height: 100vh;
    }

    .chat-container {
      background: white;
      border-radius: 14px;
      box-shadow: 0 0 20px rgba(0,0,0,0.05);
      max-width: 600px;
      width: 100%;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      display: flex;
      max-width: 90%;
      line-height: 1.5;
      border-radius: 10px;
      padding: 0.85rem 1rem;
      font-size: 0.95rem;
      animation: fadeIn 0.3s ease-out forwards;
    }

    .bot {
      background: var(--bot-bg);
      align-self: flex-start;
    }

    .user {
      background: var(--user-bg);
      align-self: flex-end;
    }

    .input-wrapper {
      display: flex;
      margin-top: 1rem;
      gap: 0.5rem;
    }

    input {
      flex: 1;
      padding: 0.8rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
    }

    button {
      padding: 0.8rem 1.2rem;
      background: var(--accent);
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      background: #222;
    }

    .typing {
      font-style: italic;
      color: var(--secondary);
      font-size: 0.9rem;
    }

    .typing::after {
      content: '|';
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media(max-width: 500px) {
      .chat-container { padding: 1rem; }
      input, button { font-size: 0.85rem; }
    }
  </style>
</head>
<body>

  <div class="chat-container" id="chat">
    <div class="message bot">Hey, I’m PlugBot. I’ll walk you through a few quick questions to see if this fits you.</div>
    <div class="message bot">Ready when you are. What’s your name?</div>
  </div>

  <div class="input-wrapper">
    <input id="userInput" type="text" placeholder="Type your answer..." />
    <button onclick="handleUserInput()">Send</button>
  </div>

  <script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('userInput');

    let step = 0;
    const data = {};

    const questions = [
      "Awesome. How old are you?",
      "Where are you located?",
      "What’s your monthly income?",
      "Do you have any savings or funds available?",
      "Why are you interested in remote income?",
      "Ever tried sales or remote work before?",
      "What’s your goal monthly income?",
      "Last thing — drop your email so we can send next steps.",
      "Cool. Phone number?",
      "You’re all set. Want to book your intro call now?"
    ];

    function appendMessage(text, sender = 'bot') {
      const msg = document.createElement('div');
      msg.className = `message ${sender}`;
      msg.innerText = text;
      chat.appendChild(msg);
      chat.scrollIntoView({ behavior: 'smooth', block: 'end' });
    }

    function simulateTyping(callback) {
      const typing = document.createElement('div');
      typing.className = 'typing';
      typing.innerText = 'PlugBot is typing';
      chat.appendChild(typing);
      setTimeout(() => {
        typing.remove();
        callback();
      }, 800);
    }

    function handleUserInput() {
      const value = input.value.trim();
      if (!value) return;

      appendMessage(value, 'user');
      input.value = '';

      const fieldKeys = ["name", "age", "location", "income", "savings", "reason", "experience", "email", "phone"];

      if (step < fieldKeys.length) {
        data[fieldKeys[step]] = value;
      }

      if (step < questions.length) {
        simulateTyping(() => appendMessage(questions[step++]));
      } else {
        simulateTyping(() => {
          appendMessage("Here’s the link to book your free intro call:");
          const calendly = document.createElement('a');
          calendly.href = "https://calendly.com/jadafig1";
          calendly.innerText = "Book Call Now";
          calendly.target = "_blank";
          calendly.style.marginTop = '0.75rem';
          calendly.style.display = 'inline-block';
          calendly.style.color = '#000';
          calendly.style.fontWeight = '600';
          chat.appendChild(calendly);
          sendToWebhook();
        });
      }
    }

    function sendToWebhook() {
      fetch("https://hook.us2.make.com/y1tdeyvxp8gqtaifqsthdpiwayas40fp", {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
    }
  </script>

</body>
</html>
